<!DOCTYPE html>
<html>
  <head>
    <title>Group 4 Experiment</title>
    <link rel="icon" type="image/x-icon" href="mag.png">
    <script src="jspsych/jspsych.js"></script>
    <script src="jspsych/plugin-html-keyboard-response.js"></script>
    <script src="jspsych/plugin-instructions.js"></script>
    <script src="jspsych/plugin-image-slider-response.js"></script>
    <script src="plugin-custom-deblur-pilot.js"></script>
    <script src="plugin-custom-deblur.js"></script>
    <script src="jspsych/plugin-canvas-slider-response.js"></script>
    <script src="jspsych/plugin-preload.js"></script>
    <link href="jspsych/jspsych.css" rel="stylesheet" type="text/css" />
  </head>
  <body></body>
  <script>
    const jsPsych = initJsPsych({
        show_progress_bar: true,
        on_finish: function() {
        jsPsych.data.displayData();
        }
    });

    const subject_id = jsPsych.randomization.randomID(10);
    const filename = `${subject_id}.csv`;

    
    const images = [  ["images/animal.jpg", 10],
                      ["images/begonia.jpg", 10],
                      ["images/buildings.jpg", 10],
                      ["images/deer.jpg", 3],
                      ["images/flower.jpg", 7],
                      ["images/food.jpg", 10],
                      ["images/girl.jpg", 4],
                      ["images/goose.jpg", 10],
                      ["images/mountains.jpg", 10],
                      ["images/road.jpg", 10],
                      ["images/spider.jpg", 2],
                      ["images/terraces.jpg", 10]
                    ]

    var timeline = [];

    const shuffledImages = jsPsych.randomization.shuffle(images);

    const stimList = [];

    for (i = 0; i < shuffledImages.length; i+=3){
      const stim = {
        image1: shuffledImages[i][0],
        blur1: shuffledImages[i][1],
        image2: shuffledImages[i + 1][0],
        blur2: shuffledImages[i + 1][1],
        image3: shuffledImages[i + 2][0],
        blur3: shuffledImages[i + 1][1]
      };
      stimList.push(stim);
    }

    var instructions = {
      type: jsPsychInstructions,
      pages: [
      `Welcome! Click <strong>NEXT</strong> to begin.` +
      '<br>' +
      '<br>'
      ],
      show_clickable_nav: true
    }

    timeline.push(instructions);

    var blur_trials = {
      type: jsPsychCustomDeblur,
      timeline: [
        { stim: stimList[0],
          stim: stimList[1],
          stim: stimList[2],
          stim: stimList[3]
        }
      ]
    }

    timeline.push(blur_trials);

    jsPsych.run(timeline);
</script>
</html>
