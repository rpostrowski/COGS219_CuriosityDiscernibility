<!DOCTYPE html>
<html>
  <head>
    <title>My experiment</title>
    <script src="jspsych/jspsych.js"></script>
    <script src="jspsych/plugin-html-keyboard-response.js"></script>
    <script src="jspsych/plugin-image-slider-response.js"></script>
    <script src="jspsych/plugin-instructions.js"></script>
    <script src="jspsych/plugin-survey-text.js"></script>
    <script src="plugin-custom-deblur-pilot.js"></script>
    <script src="jspsych/plugin-canvas-slider-response.js"></script>
    <script src="jspsych/plugin-preload.js"></script>
    <link href="jspsych/jspsych.css" rel="stylesheet" type="text/css" />
  </head>
  <body></body>
  <script>
    const jsPsych = initJsPsych({
        on_finish: function() {
        jsPsych.data.displayData();
        }
    });

    var timeline = [];

    var instructions = {
      type: jsPsychInstructions,
      pages: [
      'Welcome to the experiment. Click next to begin.',
      'You will be looking at a sequence of images andxxx: ' +
      '<br>' +
      `Once you've deblurred, you will be asked to describe the image you saw, so 
      deblur until you feel confident about the content of the image that you saw.`
      ],
      show_clickable_nav: true
    }
    
    timeline.push(instructions);

    var test_procedure = {
      timeline: [
        {
          type: jsPsychCustomTrialDeblur,
          stim: jsPsych.timelineVariable('stim'),
        },
        {
          type: jsPsychSurveyText,
          questions: [
            {prompt: 'Describe what you saw in the previous image, or write "unsure" if you forgot.', rows: 1}
          ] 
        }
      ],
      timeline_variables: [
        { stim: 'images/animal.jpg'},
        { stim: 'images/bamboo.jpg'},
        { stim: 'images/begonia.jpg'},
        { stim: 'images/buildings.jpg'},
        { stim: 'images/deer.jpg'},
        { stim: 'images/flower.jpg'},
        { stim: 'images/food.jpg'},
        { stim: 'images/girl.jpg'},
        { stim: 'images/goose.jpg'},
        { stim: 'images/mountains.jpg'},
        { stim: 'images/road.jpg'},
        { stim: 'images/spider.jpg'},
        { stim: 'images/terraces.jpg'}
       ],
      sample: {
          type: 'without-replacement',
          size: 5
      }
   }

    timeline.push(test_procedure);

    jsPsych.run(timeline);
</script>
</html>
